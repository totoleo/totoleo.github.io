---
layout: post
title: "Laravel 服务提供者"
description: ""
category: Laravel
tags: [PHP,Laravel]
---

## 1. ServiceProvider 的角色：组装与注册

怎么理解呢？开发过程中，实例化一个对象，并进行一些配置，是经常性的工作。这些工作的意义是什么？  
这好比是演出开始前搭建舞台，打桩，铺放台板，棚顶，一板一眼是不能乱了顺序的。与搭建舞台不同的是，这个过程在程序中拥有更多的灵活性，如何获得一个可用的对象并进行下一步的工作，是一个充满想象力的过程。
但是，这又不是一个随意的工作。因为这个过程中不可避免的会引入其它对象或需要某些获取某些配置参数，这将产生一些依赖，也可以称之为**『耦合』**。在系统还小的时候，可能不会有什么问题。但对于中型以上的系统或者一个渐进发展的系统，如果没有好的方式去管理这个过程，这个系统将变得难以理解，更不要谈维护和扩展。比如：系统中需要缓存的功能
可能的实现是，有一个静态类`Cache`暴露了一组接口，这组接口提供选择缓存的类型和代理缓存驱动的公共接口的功能。更细致的描述中，称这个静态类为缓存的 Facade/fǝ sa: d/(门面)，具体缓存类型的实现称之为驱动(Driver)。Facade 负责 Driver 的注册、选择和代理默认驱动的接口。Driver 负责具体缓存的实现。可能你已经注意到Facade的职责中的两项：
* 注册缓存驱动
* 选择缓存驱动  

这里我想说的是，这个缓存的 Facade 就是换了一个名字的 ServiceProvider。组装、提供、选择这都是某种提示你应该遵循这种思路去实现一个系统的特征词。

这就是** IOC **，提示我们放弃在自身组装自身，而是张开怀抱，允许外界参与进来。
